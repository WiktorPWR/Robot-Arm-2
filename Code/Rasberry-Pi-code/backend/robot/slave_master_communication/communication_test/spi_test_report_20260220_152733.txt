
======================================================================
  TESTY PROTOKOLU SPI  |  Start: 2026-02-20 15:27:33
======================================================================


======================================================================
  KATEGORIA 1: Poprawny zapis (WRITE) do rejestrow
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 1.1  WRITE REG_HOMING = 1 (start homing)
      Kat.: 01-Write-Valid  |  WRITE reg=REG_HOMING fid=0x0001 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 1.2  WRITE REG_HOMING = 0 (stop homing)
      Kat.: 01-Write-Valid  |  WRITE reg=REG_HOMING fid=0x0002 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 1.3  WRITE REG_MOVE_ANGLE = 90
      Kat.: 01-Write-Valid  |  WRITE reg=REG_MOVE_ANGLE fid=0x0003 data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 1.4  WRITE REG_MOVE_ANGLE = 0
      Kat.: 01-Write-Valid  |  WRITE reg=REG_MOVE_ANGLE fid=0x0004 data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 1.5  WRITE REG_MOVE_ANGLE = 0xFFFFFFFF
      Kat.: 01-Write-Valid  |  WRITE reg=REG_MOVE_ANGLE fid=0x0005 data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 1.6  WRITE REG_DIAG_CONTROL = 0x01
      Kat.: 01-Write-Valid  |  WRITE reg=REG_DIAG_CONTROL fid=0x0006 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 1.7  WRITE REG_EMERGENCY_STOP = 1 (aktywacja)
      Kat.: 01-Write-Valid  |  WRITE reg=REG_EMERGENCY_STOP fid=0x0007 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 1.8  WRITE REG_EMERGENCY_STOP = 0 (dezaktywacja)
      Kat.: 01-Write-Valid  |  WRITE reg=REG_EMERGENCY_STOP fid=0x0008 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED



======================================================================
  KATEGORIA 2: Poprawny odczyt (READ) z rejestrów
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 2.1  READ REG_HOMING (1B)
      Kat.: 02-Read-Valid  |  READ reg=REG_HOMING fid=0x0009 size=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Dane od slave : ['0x00']
    CRC rx=0xC704DD7B  calc=0xC704DD7B  OK
  PASSED

    -> REG_HOMING = 0x00

──────────────────────────────────────────────────────────────────────
TEST: 2.2  READ REG_MOVE_ANGLE (4B)
      Kat.: 02-Read-Valid  |  READ reg=REG_MOVE_ANGLE fid=0x000A size=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Dane od slave : ['0xFF', '0xFF', '0xFF', '0xFF']
    CRC rx=0x00000000  calc=0x00000000  OK
  PASSED

    -> REG_MOVE_ANGLE = 4294967295

──────────────────────────────────────────────────────────────────────
TEST: 2.3  READ REG_DIAG_STATUS (4B, read-only)
      Kat.: 02-Read-Valid  |  READ reg=REG_DIAG_STATUS fid=0x000B size=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Dane od slave : ['0x00', '0x00', '0x00', '0x00']
    CRC rx=0xC704DD7B  calc=0xC704DD7B  OK
  PASSED

    -> REG_DIAG_STATUS = 0x00000000

──────────────────────────────────────────────────────────────────────
TEST: 2.4  READ REG_EMERGENCY_STOP (1B)
      Kat.: 02-Read-Valid  |  READ reg=REG_EMERGENCY_STOP fid=0x000C size=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Dane od slave : ['0x00']
    CRC rx=0xC704DD7B  calc=0xC704DD7B  OK
  PASSED

    -> REG_EMERGENCY_STOP = 0x00

──────────────────────────────────────────────────────────────────────
TEST: 2.5a WRITE REG_MOVE_ANGLE = 0x12345678
      Kat.: 02-Read-Valid  |  WRITE reg=REG_MOVE_ANGLE fid=0x000D data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 2.5b READ REG_MOVE_ANGLE (round-trip)
      Kat.: 02-Read-Valid  |  READ reg=REG_MOVE_ANGLE fid=0x000E size=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Dane od slave : ['0x78', '0x78', '0x78', '0x78']
    CRC rx=0x9131D16A  calc=0x9131D16A  OK
  PASSED

    -> Round-trip [FAIL]: zapisano=0x12345678  odczytano=0x78787878


======================================================================
  KATEGORIA 3: Bledny START_BYTE w naglowku
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 3.x  WRITE z START_BYTE=0xAA
      Kat.: 03-Bad-StartByte  |  WRITE reg=REG_HOMING fid=0x000F data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_START_BYTE (0x01)  [oczekiwano: WRONG_START_BYTE]
    OK: Slave odrzucil naglowek: WRONG_START_BYTE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x6A']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xAA', '0x01', '0x00', '0x0F', '0x02', '0x00', '0x00', '0x00', '0x01', '0xD0', '0x7B', '0x81', '0xD1', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x01']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 3.x  WRITE z START_BYTE=0x00
      Kat.: 03-Bad-StartByte  |  WRITE reg=REG_HOMING fid=0x0010 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_START_BYTE (0x01)  [oczekiwano: WRONG_START_BYTE]
    OK: Slave odrzucil naglowek: WRONG_START_BYTE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x01']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x00', '0x01', '0x00', '0x10', '0x02', '0x00', '0x00', '0x00', '0x01', '0xAD', '0x55', '0x08', '0x3B', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x01']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 3.x  WRITE z START_BYTE=0xFF
      Kat.: 03-Bad-StartByte  |  WRITE reg=REG_HOMING fid=0x0011 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_START_BYTE (0x01)  [oczekiwano: WRONG_START_BYTE]
    OK: Slave odrzucil naglowek: WRONG_START_BYTE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x01']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF', '0x01', '0x00', '0x11', '0x02', '0x00', '0x00', '0x00', '0x01', '0xE2', '0x02', '0x60', '0x2A', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x01']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 3.x  WRITE z START_BYTE=0x56
      Kat.: 03-Bad-StartByte  |  WRITE reg=REG_HOMING fid=0x0012 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_START_BYTE (0x01)  [oczekiwano: WRONG_START_BYTE]
    OK: Slave odrzucil naglowek: WRONG_START_BYTE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x01']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x56', '0x01', '0x00', '0x12', '0x02', '0x00', '0x00', '0x00', '0x01', '0x33', '0xFB', '0xD8', '0x19', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x01']

======================================================================



======================================================================
  KATEGORIA 4: Bledny SLAVE_ID w naglowku
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 4.x  WRITE z SLAVE_ID=0x02
      Kat.: 04-Bad-SlaveID  |  WRITE reg=REG_HOMING fid=0x0013 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_SLAVE_ID (0x03)  [oczekiwano: WRONG_SLAVE_ID]
    OK: Slave odrzucil naglowek: WRONG_SLAVE_ID
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x01']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x02', '0x00', '0x13', '0x02', '0x00', '0x00', '0x00', '0x01', '0xA7', '0xBB', '0x18', '0x9F', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x03']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 4.x  WRITE z SLAVE_ID=0x00
      Kat.: 04-Bad-SlaveID  |  WRITE reg=REG_HOMING fid=0x0014 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_SLAVE_ID (0x03)  [oczekiwano: WRONG_SLAVE_ID]
    OK: Slave odrzucil naglowek: WRONG_SLAVE_ID
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x03']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x00', '0x00', '0x14', '0x02', '0x00', '0x00', '0x00', '0x01', '0xDD', '0xC4', '0xD2', '0x45', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x03']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 4.x  WRITE z SLAVE_ID=0xFF
      Kat.: 04-Bad-SlaveID  |  WRITE reg=REG_HOMING fid=0x0015 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_SLAVE_ID (0x03)  [oczekiwano: WRONG_SLAVE_ID]
    OK: Slave odrzucil naglowek: WRONG_SLAVE_ID
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x03']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0xFF', '0x00', '0x15', '0x02', '0x00', '0x00', '0x00', '0x01', '0xA3', '0x70', '0x9C', '0x07', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x03']

======================================================================



======================================================================
  KATEGORIA 5: Bledny END_BYTE w naglowku
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 5.x  WRITE z END_BYTE=0x55
      Kat.: 05-Bad-EndByte  |  WRITE reg=REG_HOMING fid=0x0016 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_END_BYTE (0x06)  [oczekiwano: WRONG_END_BYTE]
    OK: Slave odrzucil naglowek: WRONG_END_BYTE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x03']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x16', '0x02', '0x00', '0x00', '0x00', '0x01', '0x0A', '0x67', '0x65', '0xEA', '0x55']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x06']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 5.x  WRITE z END_BYTE=0x00
      Kat.: 05-Bad-EndByte  |  WRITE reg=REG_HOMING fid=0x0017 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_END_BYTE (0x06)  [oczekiwano: WRONG_END_BYTE]
    OK: Slave odrzucil naglowek: WRONG_END_BYTE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x06']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x17', '0x02', '0x00', '0x00', '0x00', '0x01', '0x45', '0x30', '0x0D', '0xFB', '0x00']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x06']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 5.x  WRITE z END_BYTE=0xFF
      Kat.: 05-Bad-EndByte  |  WRITE reg=REG_HOMING fid=0x0018 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_END_BYTE (0x06)  [oczekiwano: WRONG_END_BYTE]
    OK: Slave odrzucil naglowek: WRONG_END_BYTE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x06']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x18', '0x02', '0x00', '0x00', '0x00', '0x01', '0xDE', '0x6C', '0x73', '0xDD', '0xFF']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x06']

======================================================================



======================================================================
  KATEGORIA 6: Bledny adres rejestru (WRONG_REGISTER)
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 6.x  WRITE na nieistniejacy rejestr addr=5
      Kat.: 06-Bad-Register  |  WRITE reg=0x0005 fid=0x0019 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_REGISTER (0x04)  [oczekiwano: WRONG_REGISTER]
    OK: Slave odrzucil naglowek: WRONG_REGISTER
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x06']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x19', '0x02', '0x00', '0x05', '0x00', '0x01', '0x06', '0x06', '0xFB', '0xB9', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x04']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 6.x  WRITE na nieistniejacy rejestr addr=0x10
      Kat.: 06-Bad-Register  |  WRITE reg=0x0010 fid=0x001A data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_REGISTER (0x04)  [oczekiwano: WRONG_REGISTER]
    OK: Slave odrzucil naglowek: WRONG_REGISTER
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x04']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x1A', '0x02', '0x00', '0x10', '0x00', '0x01', '0x50', '0x93', '0x38', '0xEC', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x04']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 6.x  WRITE na nieistniejacy rejestr addr=0xFF
      Kat.: 06-Bad-Register  |  WRITE reg=0x00FF fid=0x001B data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_REGISTER (0x04)  [oczekiwano: WRONG_REGISTER]
    OK: Slave odrzucil naglowek: WRONG_REGISTER
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x04']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x1B', '0x02', '0x00', '0xFF', '0x00', '0x01', '0x41', '0x2A', '0xEF', '0x27', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x04']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 6.x  WRITE na nieistniejacy rejestr addr=0xFFFF
      Kat.: 06-Bad-Register  |  WRITE reg=0xFFFF fid=0x001C data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_REGISTER (0x04)  [oczekiwano: WRONG_REGISTER]
    OK: Slave odrzucil naglowek: WRONG_REGISTER
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x04']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x1C', '0x02', '0xFF', '0xFF', '0x00', '0x01', '0x18', '0xB8', '0xAA', '0x53', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x04']

======================================================================



======================================================================
  KATEGORIA 7: Bledny data_size (WRONG_DATA_SIZE)
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 7.1  data_size=17 (>MAX 16)
      Kat.: 07-Bad-DataSize  |  declared=17B  reg=REG_HOMING
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_DATA_SIZE (0x05)  [oczekiwano: WRONG_DATA_SIZE]
    OK: Slave odrzucil bledny data_size
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 7.2  data_size=255
      Kat.: 07-Bad-DataSize  |  declared=255B  reg=REG_HOMING
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_DATA_SIZE (0x05)  [oczekiwano: WRONG_DATA_SIZE]
    OK: Slave odrzucil bledny data_size
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 7.3  REG_HOMING(1B) z data_size=4
      Kat.: 07-Bad-DataSize  |  declared=4B  reg=REG_HOMING
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_DATA_SIZE (0x05)  [oczekiwano: WRONG_DATA_SIZE]
    OK: Slave odrzucil bledny data_size
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 7.4  REG_MOVE_ANGLE(4B) z data_size=8
      Kat.: 07-Bad-DataSize  |  declared=8B  reg=REG_MOVE_ANGLE
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_DATA_SIZE (0x05)  [oczekiwano: WRONG_DATA_SIZE]
    OK: Slave odrzucil bledny data_size
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 7.5  data_size=0 (pusty payload)
      Kat.: 07-Bad-DataSize  |  declared=0B  reg=REG_HOMING
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_DATA_SIZE (0x05)  [oczekiwano: WRONG_DATA_SIZE]
    OK: Slave odrzucil bledny data_size
  PASSED



======================================================================
  KATEGORIA 8: Duplikat frame_id (WRONG_FRAME_ID)
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 8.1  Pierwszy WRITE z frame_id
      Kat.: 08-DupFrameID  |  WRITE reg=REG_HOMING fid=0x0022 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 8.2  Ten sam frame_id – oczekuj WRONG_FRAME_ID
      Kat.: 08-DupFrameID  |  WRITE reg=REG_HOMING fid=0x0022 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_FRAME_ID (0x02)  [oczekiwano: WRONG_FRAME_ID]
    OK: Slave odrzucil naglowek: WRONG_FRAME_ID
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0xAA']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x22', '0x02', '0x00', '0x00', '0x00', '0x01', '0x1D', '0xAD', '0xDD', '0xFA', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x02']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 8.3  Nowy frame_id – powinien przejsc
      Kat.: 08-DupFrameID  |  WRITE reg=REG_HOMING fid=0x0023 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
    Czekam na READY_SLAVE_FLAG (GPIO22 LOW)...
    WARN: Timeout GPIO22 – callback moze nie dzialac
  PASSED



======================================================================
  KATEGORIA 9: Nieprawidlowa operacja (WRONG_OPERATION)
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 9.1  READ z write-only rejestru (REG_DIAG_CONTROL)
      Kat.: 09-BadOperation  |  READ reg=REG_DIAG_CONTROL fid=0x0024 size=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_OPERATION (0x08)  [oczekiwano: WRONG_OPERATION]
    OK: Slave odrzucil naglowek: WRONG_OPERATION
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0xAA']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x24', '0x01', '0x00', '0x02', '0x00', '0x01', '0xF6', '0x8F', '0x4B', '0x7A', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x08']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 9.2  WRITE do read-only rejestru (REG_DIAG_STATUS)
      Kat.: 09-BadOperation  |  WRITE reg=REG_DIAG_STATUS fid=0x0025 data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_OPERATION (0x08)  [oczekiwano: WRONG_OPERATION]
    OK: Slave odrzucil naglowek: WRONG_OPERATION
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x08']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x25', '0x02', '0x00', '0x03', '0x00', '0x04', '0x27', '0xBB', '0x51', '0x5B', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x08']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 9.3  operation_type=0x03
      Kat.: 09-BadOperation  |  operation_type=0x03
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_OPERATION (0x08)  [oczekiwano: WRONG_OPERATION]
    OK: Slave odrzucil nieprawidlowy operation_type
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 9.4  operation_type=0x00
      Kat.: 09-BadOperation  |  operation_type=0x00
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_OPERATION (0x08)  [oczekiwano: WRONG_OPERATION]
    OK: Slave odrzucil nieprawidlowy operation_type
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 9.5  operation_type=0xFF
      Kat.: 09-BadOperation  |  operation_type=0xFF
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_OPERATION (0x08)  [oczekiwano: WRONG_OPERATION]
    OK: Slave odrzucil nieprawidlowy operation_type
  PASSED



======================================================================
  KATEGORIA 10: Bledne CRC w naglowku (WRONG_CRC_VALUE)
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 10.1 WRITE z celowo blednym CRC naglowka
      Kat.: 10-Bad-HdrCRC  |  WRITE reg=REG_HOMING fid=0x0029 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_CRC_VALUE (0x07)  [oczekiwano: WRONG_CRC_VALUE]
    OK: Slave odrzucil naglowek: WRONG_CRC_VALUE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x08']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x29', '0x02', '0x00', '0x00', '0x00', '0x01', '0x61', '0xC0', '0xA0', '0xC0', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x07']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 10.2 READ z celowo blednym CRC naglowka
      Kat.: 10-Bad-HdrCRC  |  READ reg=REG_HOMING fid=0x002A size=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_CRC_VALUE (0x07)  [oczekiwano: WRONG_CRC_VALUE]
    OK: Slave odrzucil naglowek: WRONG_CRC_VALUE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x07']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x2A', '0x01', '0x00', '0x00', '0x00', '0x01', '0x5C', '0xDB', '0x7D', '0xAD', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x07']

======================================================================



======================================================================
  KATEGORIA 11: Bledne CRC w danych – sciezka WRITE
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 11.1 WRITE REG_HOMING z blednym CRC danych
      Kat.: 11-Bad-DataCRC  |  WRITE reg=REG_HOMING fid=0x002B data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x07(WRONG_CRC_VALUE)  END[OK]=0xAA
    OK: Slave wykryl blad CRC danych: WRONG_CRC_VALUE
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 11.2 WRITE REG_MOVE_ANGLE z blednym CRC danych
      Kat.: 11-Bad-DataCRC  |  WRITE reg=REG_MOVE_ANGLE fid=0x002C data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x07(WRONG_CRC_VALUE)  END[OK]=0xAA
    OK: Slave wykryl blad CRC danych: WRONG_CRC_VALUE
  PASSED



======================================================================
  KATEGORIA 12: Bledny COMMIT od mastera – sciezka READ
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 12.1 READ REG_MOVE_ANGLE + bledny COMMIT mastera
      Kat.: 12-Bad-MasterCommit  |  READ reg=REG_MOVE_ANGLE fid=0x002D size=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Dane od slave : ['0x78', '0x78', '0x78', '0x78']
    CRC rx=0x9131D16A  calc=0x9131D16A  OK
    WARN: Wysylam celowo bledny COMMIT (WRONG_CRC_VALUE)
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 12.2 READ REG_HOMING + bledny COMMIT mastera
      Kat.: 12-Bad-MasterCommit  |  READ reg=REG_HOMING fid=0x002E size=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Dane od slave : ['0x00']
    CRC rx=0xC704DD7B  calc=0xC704DD7B  OK
    WARN: Wysylam celowo bledny COMMIT (WRONG_CRC_VALUE)
  PASSED



======================================================================
  KATEGORIA 13: Testy timeoutu STM32
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 13.x Timeout po kroku: 'syn'
      Kat.: 13-Timeout  |  abort_after='syn'  delay=2.5s
──────────────────────────────────────────────────────────────────────
    Czekam 2.5s (symulacja timeoutu po SYN)...
    [RESET SPI] Czyszczenie magistrali...
    [RESET SPI] Gotowy.

    OK: STM32 zresetowal sie i odpowiada na SYN
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x7B']

──────────────────────────────────────────────────────────────────────
  Krok 2: SYN (po timeout)
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: SYN_ACK (po timeout)
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 13.x Timeout po kroku: 'ack'
      Kat.: 13-Timeout  |  abort_after='ack'  delay=2.5s
──────────────────────────────────────────────────────────────────────
    Czekam 2.5s (symulacja timeoutu po ACK)...
    [RESET SPI] Czyszczenie magistrali...
    [RESET SPI] Gotowy.

    OK: STM32 zresetowal sie i odpowiada na SYN
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: SYN (po timeout)
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: SYN_ACK (po timeout)
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

======================================================================



======================================================================
  KATEGORIA 14: READY_SLAVE_FLAG (GPIO22) po wykonaniu callbacku
======================================================================

──────────────────────────────────────────────────────────────────────
TEST: 14.1 READY po WRITE REG_HOMING=1
      Kat.: 14-ReadyFlag  |  reg=REG_HOMING  wait=1.5s
──────────────────────────────────────────────────────────────────────
    GPIO22 przed testem: HIGH

──────────────────────────────────────────────────────────────────────
TEST: 14.1 READY po WRITE REG_HOMING=1
      Kat.: 14-ReadyFlag  |  WRITE reg=REG_HOMING fid=0x002F data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED

    FAIL: GPIO22 nie opadl w ciagu 1.5s
    GPIO22 po tescie: HIGH

──────────────────────────────────────────────────────────────────────
TEST: 14.2 READY po WRITE REG_EMERGENCY_STOP=1
      Kat.: 14-ReadyFlag  |  reg=REG_EMERGENCY_STOP  wait=1.5s
──────────────────────────────────────────────────────────────────────
    GPIO22 przed testem: HIGH

──────────────────────────────────────────────────────────────────────
TEST: 14.2 READY po WRITE REG_EMERGENCY_STOP=1
      Kat.: 14-ReadyFlag  |  WRITE reg=REG_EMERGENCY_STOP fid=0x0030 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED

    FAIL: GPIO22 nie opadl w ciagu 1.5s
    GPIO22 po tescie: HIGH

──────────────────────────────────────────────────────────────────────
TEST: 14.3 READY po WRITE REG_DIAG_CONTROL=1
      Kat.: 14-ReadyFlag  |  reg=REG_DIAG_CONTROL  wait=1.5s
──────────────────────────────────────────────────────────────────────
    GPIO22 przed testem: HIGH

──────────────────────────────────────────────────────────────────────
TEST: 14.3 READY po WRITE REG_DIAG_CONTROL=1
      Kat.: 14-ReadyFlag  |  WRITE reg=REG_DIAG_CONTROL fid=0x0031 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED

    FAIL: GPIO22 nie opadl w ciagu 1.5s
    GPIO22 po tescie: HIGH

──────────────────────────────────────────────────────────────────────
TEST: 14.4 READY po WRITE REG_MOVE_ANGLE=360
      Kat.: 14-ReadyFlag  |  reg=REG_MOVE_ANGLE  wait=1.5s
──────────────────────────────────────────────────────────────────────
    GPIO22 przed testem: HIGH

──────────────────────────────────────────────────────────────────────
TEST: 14.4 READY po WRITE REG_MOVE_ANGLE=360
      Kat.: 14-ReadyFlag  |  WRITE reg=REG_MOVE_ANGLE fid=0x0032 data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED

    FAIL: GPIO22 nie opadl w ciagu 1.5s
    GPIO22 po tescie: HIGH


======================================================================
  KATEGORIA 15: Stress testy
======================================================================

--- Test 15.1: 10x szybkich WRITE REG_HOMING ---

──────────────────────────────────────────────────────────────────────
TEST: 15.1.01 WRITE REG_HOMING=0
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x0033 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.1.02 WRITE REG_HOMING=1
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x0034 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.1.03 WRITE REG_HOMING=0
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x0035 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.1.04 WRITE REG_HOMING=1
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x0036 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.1.05 WRITE REG_HOMING=0
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x0037 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.1.06 WRITE REG_HOMING=1
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x0038 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.1.07 WRITE REG_HOMING=0
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x0039 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.1.08 WRITE REG_HOMING=1
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x003A data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.1.09 WRITE REG_HOMING=0
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x003B data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.1.10 WRITE REG_HOMING=1
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x003C data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


--- Test 15.2: 5x round-trip WRITE+READ REG_MOVE_ANGLE ---

──────────────────────────────────────────────────────────────────────
TEST: 15.2.01W WRITE angle=1000
      Kat.: 15-Stress  |  WRITE reg=REG_MOVE_ANGLE fid=0x003D data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.2.01R READ angle
      Kat.: 15-Stress  |  READ reg=REG_MOVE_ANGLE fid=0x003E size=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
  PASSED

    Round-trip [FAIL]: zapisano=1000  odczytano=3907578088

──────────────────────────────────────────────────────────────────────
TEST: 15.2.02W WRITE angle=2000
      Kat.: 15-Stress  |  WRITE reg=REG_MOVE_ANGLE fid=0x003F data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.2.02R READ angle
      Kat.: 15-Stress  |  READ reg=REG_MOVE_ANGLE fid=0x0040 size=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
  PASSED

    Round-trip [FAIL]: zapisano=2000  odczytano=3503345872

──────────────────────────────────────────────────────────────────────
TEST: 15.2.03W WRITE angle=3000
      Kat.: 15-Stress  |  WRITE reg=REG_MOVE_ANGLE fid=0x0041 data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.2.03R READ angle
      Kat.: 15-Stress  |  READ reg=REG_MOVE_ANGLE fid=0x0042 size=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
  PASSED

    Round-trip [FAIL]: zapisano=3000  odczytano=3099113656

──────────────────────────────────────────────────────────────────────
TEST: 15.2.04W WRITE angle=4000
      Kat.: 15-Stress  |  WRITE reg=REG_MOVE_ANGLE fid=0x0043 data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.2.04R READ angle
      Kat.: 15-Stress  |  READ reg=REG_MOVE_ANGLE fid=0x0044 size=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
  PASSED

    Round-trip [FAIL]: zapisano=4000  odczytano=2694881440

──────────────────────────────────────────────────────────────────────
TEST: 15.2.05W WRITE angle=5000
      Kat.: 15-Stress  |  WRITE reg=REG_MOVE_ANGLE fid=0x0045 data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.2.05R READ angle
      Kat.: 15-Stress  |  READ reg=REG_MOVE_ANGLE fid=0x0046 size=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
  PASSED

    Round-trip [FAIL]: zapisano=5000  odczytano=2290649224

--- Test 15.3: Przemienne poprawne/bledne ramki ---

──────────────────────────────────────────────────────────────────────
TEST: 15.3.01 Poprawny WRITE
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x0047 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.3.02 Bledny WRITE (corrupt header CRC)
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x0048 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_CRC_VALUE (0x07)  [oczekiwano: WRONG_CRC_VALUE]
    OK: Slave odrzucil naglowek: WRONG_CRC_VALUE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0xAA']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x48', '0x02', '0x00', '0x00', '0x00', '0x01', '0x72', '0x3B', '0xC3', '0x17', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x07']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 15.3.03 Poprawny WRITE
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x0049 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.3.04 Bledny WRITE (corrupt header CRC)
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x004A data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_CRC_VALUE (0x07)  [oczekiwano: WRONG_CRC_VALUE]
    OK: Slave odrzucil naglowek: WRONG_CRC_VALUE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0xAA']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x4A', '0x02', '0x00', '0x00', '0x00', '0x01', '0xEC', '0x95', '0x13', '0x35', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x07']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 15.3.05 Poprawny WRITE
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x004B data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.3.06 Bledny WRITE (corrupt header CRC)
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x004C data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_CRC_VALUE (0x07)  [oczekiwano: WRONG_CRC_VALUE]
    OK: Slave odrzucil naglowek: WRONG_CRC_VALUE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0xAA']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x4C', '0x02', '0x00', '0x00', '0x00', '0x01', '0x4B', '0xA7', '0x7E', '0xE4', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x07']

======================================================================


──────────────────────────────────────────────────────────────────────
TEST: 15.3.07 Poprawny WRITE
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x004D data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.3.08 Bledny WRITE (corrupt header CRC)
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x004E data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: WRONG_CRC_VALUE (0x07)  [oczekiwano: WRONG_CRC_VALUE]
    OK: Slave odrzucil naglowek: WRONG_CRC_VALUE
  PASSED


╔════════════════════════════════════════════════════════════════════╗
║                      FLOW KOMUNIKACJI                              ║
╚════════════════════════════════════════════════════════════════════╝

──────────────────────────────────────────────────────────────────────
  Krok 1: 1. SYN -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x97']
  MISO (Slave->Master): ['0xAA']

──────────────────────────────────────────────────────────────────────
  Krok 2: 2. Odbior SYN_ACK
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 3: 3. ACK -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x99']
  MISO (Slave->Master): ['0x98']

──────────────────────────────────────────────────────────────────────
  Krok 4: 4. HEADER (14B) -> slave
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0x55', '0x01', '0x00', '0x4E', '0x02', '0x00', '0x00', '0x00', '0x01', '0xD5', '0x09', '0xAE', '0xC6', '0xAA']
  MISO (Slave->Master): ['0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98', '0x98']

──────────────────────────────────────────────────────────────────────
  Krok 5: 5. Odbior VALIDATION_CODE
──────────────────────────────────────────────────────────────────────
  MOSI (Master->Slave): ['0xFF']
  MISO (Slave->Master): ['0x07']

======================================================================


--- Test 15.4: Wszystkie rejestry R/W ---

──────────────────────────────────────────────────────────────────────
TEST: 15.4 WRITE REG_HOMING
      Kat.: 15-Stress  |  WRITE reg=REG_HOMING fid=0x004F data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.4 READ  REG_HOMING
      Kat.: 15-Stress  |  READ reg=REG_HOMING fid=0x0050 size=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.4 WRITE REG_MOVE_ANGLE
      Kat.: 15-Stress  |  WRITE reg=REG_MOVE_ANGLE fid=0x0051 data=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.4 READ  REG_MOVE_ANGLE
      Kat.: 15-Stress  |  READ reg=REG_MOVE_ANGLE fid=0x0052 size=4B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.4 WRITE REG_EMERGENCY_STOP
      Kat.: 15-Stress  |  WRITE reg=REG_EMERGENCY_STOP fid=0x0053 data=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
    Slave COMMIT: START[OK]=0x55  COMMIT[OK]=0x9A  ERR=0x00(OK_FRAME)  END[OK]=0xAA
  PASSED


──────────────────────────────────────────────────────────────────────
TEST: 15.4 READ  REG_EMERGENCY_STOP
      Kat.: 15-Stress  |  READ reg=REG_EMERGENCY_STOP fid=0x0054 size=1B
──────────────────────────────────────────────────────────────────────
    [OK  ] VALIDATION: OK_FRAME (0x00)  [oczekiwano: OK_FRAME]
  PASSED


  Koniec testow: 2026-02-20 15:29:15

======================================================================
  PODSUMOWANIE TESTOW
======================================================================
  Lacznie testow : 91
  Udanych        : 87
  Nieudanych     : 4
  Wskaznik sukc. : 95.6%

----------------------------------------------------------------------
  Kategoria                               Pass  Total       %
----------------------------------------------------------------------
  [OK ] 01-Write-Valid                          8      8  100.0%
  [OK ] 02-Read-Valid                           6      6  100.0%
  [OK ] 03-Bad-StartByte                        4      4  100.0%
  [OK ] 04-Bad-SlaveID                          3      3  100.0%
  [OK ] 05-Bad-EndByte                          3      3  100.0%
  [OK ] 06-Bad-Register                         4      4  100.0%
  [OK ] 07-Bad-DataSize                         5      5  100.0%
  [OK ] 08-DupFrameID                           3      3  100.0%
  [OK ] 09-BadOperation                         5      5  100.0%
  [OK ] 10-Bad-HdrCRC                           2      2  100.0%
  [OK ] 11-Bad-DataCRC                          2      2  100.0%
  [OK ] 12-Bad-MasterCommit                     2      2  100.0%
  [OK ] 13-Timeout                              2      2  100.0%
  [!!!] 14-ReadyFlag                            4      8   50.0%
  [OK ] 15-Stress                              34     34  100.0%
======================================================================
  UWAGA: 4 testow wymaga uwagi
======================================================================

